<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>FRP.Yampa.Simulation</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">Yampa-0.11.1: Library for programming hybrid systems.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Antony Courtney and Henrik Nilsson Yale University 2003</td></tr><tr><th>License</th><td>BSD-style (see the LICENSE file in the distribution)</td></tr><tr><th>Maintainer</th><td>ivan.perez@keera.co.uk</td></tr><tr><th>Stability</th><td>provisional</td></tr><tr><th>Portability</th><td>non-portable (GHC extensions)</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">FRP.Yampa.Simulation</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Reactimation</a><ul><li><a href="#g:2">Low-level reactimation interface</a></li></ul></li><li><a href="#g:3">Embedding</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Execution/simulation of signal functions.</p><p>SFs can be executed in two ways: by running them, feeding input samples one
 by one, obtained from a monadic environment (presumably, |IO|), or by
 passing an input stream and calculating an output stream. The former is
 called <em>reactimation</em>, and the latter is called <em>embedding</em>.</p><p>Normally, to run an SF, you would use <code><a href="FRP-Yampa-Simulation.html#v:reactimate" title="FRP.Yampa.Simulation">reactimate</a></code>, providing input samples,
 and consuming the output samples in the <code><a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/System-IO.html#t:IO" title="System.IO">IO</a></code> monad. This function takes over
 the program, implementing a &quot;main loop&quot;. If you want more control over the
 evaluation loop (for instance, if you are using Yampa in combination with a
 backend that also implements some main loop), you may want to use the
 lower-level API for reactimation (<code><a href="FRP-Yampa-Simulation.html#t:ReactHandle" title="FRP.Yampa.Simulation">ReactHandle</a></code>, <code><a href="FRP-Yampa-Simulation.html#v:reactInit" title="FRP.Yampa.Simulation">reactInit</a></code>, <code><a href="FRP-Yampa-Simulation.html#v:react" title="FRP.Yampa.Simulation">react</a></code>).</p><p>You can use <code><a href="FRP-Yampa-Simulation.html#v:embed" title="FRP.Yampa.Simulation">embed</a></code> for testing, to evaluate SFs in a terminal, and to embed
 an SF inside a larger system. The helper functions <code><a href="FRP-Yampa-Simulation.html#v:deltaEncode" title="FRP.Yampa.Simulation">deltaEncode</a></code> and
 <code><a href="FRP-Yampa-Simulation.html#v:deltaEncodeBy" title="FRP.Yampa.Simulation">deltaEncodeBy</a></code> facilitate producing input <em>signals</em> from plain lists of
 input samples.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:reactimate">reactimate</a> :: <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; m a -&gt; (<a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; m (<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)) -&gt; (<a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; b -&gt; m <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="FRP-Yampa.html#t:SF" title="FRP.Yampa">SF</a> a b -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:ReactHandle">ReactHandle</a> a b</li><li class="src short"><a href="#v:reactInit">reactInit</a> :: <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; (<a href="FRP-Yampa-Simulation.html#t:ReactHandle" title="FRP.Yampa.Simulation">ReactHandle</a> a b -&gt; <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; b -&gt; <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="FRP-Yampa.html#t:SF" title="FRP.Yampa">SF</a> a b -&gt; <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="FRP-Yampa-Simulation.html#t:ReactHandle" title="FRP.Yampa.Simulation">ReactHandle</a> a b)</li><li class="src short"><a href="#v:react">react</a> :: <a href="FRP-Yampa-Simulation.html#t:ReactHandle" title="FRP.Yampa.Simulation">ReactHandle</a> a b -&gt; (<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) -&gt; <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:embed">embed</a> :: <a href="FRP-Yampa.html#t:SF" title="FRP.Yampa">SF</a> a b -&gt; (a, [(<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)]) -&gt; [b]</li><li class="src short"><a href="#v:embedSynch">embedSynch</a> :: <a href="FRP-Yampa.html#t:SF" title="FRP.Yampa">SF</a> a b -&gt; (a, [(<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)]) -&gt; <a href="FRP-Yampa.html#t:SF" title="FRP.Yampa">SF</a> <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Prelude.html#t:Double" title="Prelude">Double</a> b</li><li class="src short"><a href="#v:deltaEncode">deltaEncode</a> :: <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; <a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a> -&gt; [a] -&gt; (a, [(<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)])</li><li class="src short"><a href="#v:deltaEncodeBy">deltaEncodeBy</a> :: (a -&gt; a -&gt; <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a> -&gt; [a] -&gt; (a, [(<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)])</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Reactimation</h1></a><div class="top"><p class="src"><a id="v:reactimate" class="def">reactimate</a> <a href="#v:reactimate" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; m a</td><td class="doc"><p>Initialization action</p></td></tr><tr><td class="src">-&gt; (<a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; m (<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a))</td><td class="doc"><p>Input sensing action</p></td></tr><tr><td class="src">-&gt; (<a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; b -&gt; m <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</td><td class="doc"><p>Actuation (output processing) action</p></td></tr><tr><td class="src">-&gt; <a href="FRP-Yampa.html#t:SF" title="FRP.Yampa">SF</a> a b</td><td class="doc"><p>Signal function</p></td></tr><tr><td class="src">-&gt; m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Convenience function to run a signal function indefinitely, using
 a IO actions to obtain new input and process the output.</p><p>This function first runs the initialization action, which provides the
 initial input for the signal transformer at time 0.</p><p>Afterwards, an input sensing action is used to obtain new input (if any) and
 the time since the last iteration. The argument to the input sensing function
 indicates if it can block. If no new input is received, it is assumed to be
 the same as in the last iteration.</p><p>After applying the signal function to the input, the actuation IO action
 is executed. The first argument indicates if the output has changed, the second
 gives the actual output). Actuation functions may choose to ignore the first
 argument altogether. This action should return True if the reactimation
 must stop, and False if it should continue.</p><p>Note that this becomes the program's <em>main loop</em>, which makes using this
 function incompatible with GLUT, Gtk and other graphics libraries. It may also
 impose a sizeable constraint in larger projects in which different subparts run
 at different time steps. If you need to control the main
 loop yourself for these or other reasons, use <code><a href="FRP-Yampa-Simulation.html#v:reactInit" title="FRP.Yampa.Simulation">reactInit</a></code> and <code><a href="FRP-Yampa-Simulation.html#v:react" title="FRP.Yampa.Simulation">react</a></code>.</p></div></div><a href="#g:2" id="g:2"><h2>Low-level reactimation interface</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ReactHandle" class="def">ReactHandle</a> a b <a href="#t:ReactHandle" class="selflink">#</a></p><div class="doc"><p>A reference to reactimate's state, maintained across samples.</p></div></div><div class="top"><p class="src"><a id="v:reactInit" class="def">reactInit</a> :: <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; (<a href="FRP-Yampa-Simulation.html#t:ReactHandle" title="FRP.Yampa.Simulation">ReactHandle</a> a b -&gt; <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; b -&gt; <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="FRP-Yampa.html#t:SF" title="FRP.Yampa">SF</a> a b -&gt; <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="FRP-Yampa-Simulation.html#t:ReactHandle" title="FRP.Yampa.Simulation">ReactHandle</a> a b) <a href="#v:reactInit" class="selflink">#</a></p><div class="doc"><p>Initialize a top-level reaction handle.</p></div></div><div class="top"><p class="src"><a id="v:react" class="def">react</a> :: <a href="FRP-Yampa-Simulation.html#t:ReactHandle" title="FRP.Yampa.Simulation">ReactHandle</a> a b -&gt; (<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) -&gt; <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:react" class="selflink">#</a></p><div class="doc"><p>Process a single input sample.</p></div></div><a href="#g:3" id="g:3"><h1>Embedding</h1></a><div class="top"><p class="src"><a id="v:embed" class="def">embed</a> :: <a href="FRP-Yampa.html#t:SF" title="FRP.Yampa">SF</a> a b -&gt; (a, [(<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)]) -&gt; [b] <a href="#v:embed" class="selflink">#</a></p><div class="doc"><p>Given a signal function and a pair with an initial
 input sample for the input signal, and a list of sampling
 times, possibly with new input samples at those times,
 it produces a list of output samples.</p><p>This is a simplified, purely-functional version of <code><a href="FRP-Yampa-Simulation.html#v:reactimate" title="FRP.Yampa.Simulation">reactimate</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:embedSynch" class="def">embedSynch</a> :: <a href="FRP-Yampa.html#t:SF" title="FRP.Yampa">SF</a> a b -&gt; (a, [(<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)]) -&gt; <a href="FRP-Yampa.html#t:SF" title="FRP.Yampa">SF</a> <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Prelude.html#t:Double" title="Prelude">Double</a> b <a href="#v:embedSynch" class="selflink">#</a></p><div class="doc"><p>Synchronous embedding. The embedded signal function is run on the supplied
 input and time stream at a given (but variable) ratio &gt;= 0 to the outer
 time flow. When the ratio is 0, the embedded signal function is paused.</p></div></div><div class="top"><p class="src"><a id="v:deltaEncode" class="def">deltaEncode</a> :: <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; <a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a> -&gt; [a] -&gt; (a, [(<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)]) <a href="#v:deltaEncode" class="selflink">#</a></p><div class="doc"><p>Spaces a list of samples by a fixed time delta, avoiding
   unnecessary samples when the input has not changed since
   the last sample.</p></div></div><div class="top"><p class="src"><a id="v:deltaEncodeBy" class="def">deltaEncodeBy</a> :: (a -&gt; a -&gt; <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a> -&gt; [a] -&gt; (a, [(<a href="FRP-Yampa.html#t:DTime" title="FRP.Yampa">DTime</a>, <a href="file:///nix/store/d8hy7da75lpz3afn42wq6iyy43hvrgrv-ghc-8.4.3-doc/share/doc/ghc/html/libraries/base-4.11.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)]) <a href="#v:deltaEncodeBy" class="selflink">#</a></p><div class="doc"><p><code><a href="FRP-Yampa-Simulation.html#v:deltaEncode" title="FRP.Yampa.Simulation">deltaEncode</a></code> parameterized by the equality test.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.20.0</p></div></body></html>